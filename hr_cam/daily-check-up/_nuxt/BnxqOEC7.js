import{_ as O}from"./BXO7cnFK.js";import{f as R,g as T,h as A,o as p,w as h,r as f,m as K,i,P as L,j as N,k as W,l as V,n as E,p as H,q as P,s as G,v as _,x as M,a as m,y as d,c as y,z as C,b as v,d as q,t as $,A as J,B as Q,C as X,D as Y,E as Z,F as j,G as D,H as ee,I as F}from"./BAx2i1UF.js";import{_ as te}from"./CDlhA1dI.js";const ae=R({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(a){const e=a;return T(),(s,n)=>(p(),A(i(L),K(e,{onMousedown:n[0]||(n[0]=l=>{!l.defaultPrevented&&l.detail>1&&l.preventDefault()})}),{default:h(()=>[f(s.$slots,"default")]),_:3},16))}}),se={slots:{root:"",wrapper:"",labelWrapper:"flex content-center items-center justify-between",label:"block font-medium text-default",container:"mt-1 relative",description:"text-muted",error:"mt-2 text-error",hint:"text-muted",help:"mt-2 text-muted"},variants:{size:{xs:{root:"text-xs"},sm:{root:"text-xs"},md:{root:"text-sm"},lg:{root:"text-sm"},xl:{root:"text-base"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}}},defaultVariants:{size:"md"}},le=["id"],re=["id"],ne=["id"],ie={__name:"FormField",props:{as:{type:null,required:!1},name:{type:String,required:!1},errorPattern:{type:null,required:!1},label:{type:String,required:!1},description:{type:String,required:!1},help:{type:String,required:!1},error:{type:[String,Boolean],required:!1},hint:{type:String,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},eagerValidation:{type:Boolean,required:!1},validateOnInputDelay:{type:Number,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(a){const e=a,s=N(),n=W(),l=V(()=>{var t;return E({extend:E(se),...((t=n.ui)==null?void 0:t.formField)||{}})({size:e.size,required:e.required})}),b=H("form-errors",null),o=V(()=>{var t,r;return e.error||((r=(t=b==null?void 0:b.value)==null?void 0:t.find(u=>u.name&&(u.name===e.name||e.errorPattern&&u.name.match(e.errorPattern))))==null?void 0:r.message)}),w=P(G()),c=w.value;return _(J,w),_(M,V(()=>({error:o.value,name:e.name,size:e.size,eagerValidation:e.eagerValidation,validateOnInputDelay:e.validateOnInputDelay,errorPattern:e.errorPattern,hint:e.hint,description:e.description,help:e.help,ariaId:c}))),(t,r)=>{var u;return p(),A(i(L),{as:a.as,class:d(l.value.root({class:[(u=e.ui)==null?void 0:u.root,e.class]}))},{default:h(()=>{var x,k,S,g,I,z,U,B;return[m("div",{class:d(l.value.wrapper({class:(x=e.ui)==null?void 0:x.wrapper}))},[a.label||s.label?(p(),y("div",{key:0,class:d(l.value.labelWrapper({class:(k=e.ui)==null?void 0:k.labelWrapper}))},[v(i(ae),{for:w.value,class:d(l.value.label({class:(S=e.ui)==null?void 0:S.label}))},{default:h(()=>[f(t.$slots,"label",{label:a.label},()=>[q($(a.label),1)])]),_:3},8,["for","class"]),a.hint||s.hint?(p(),y("span",{key:0,id:`${i(c)}-hint`,class:d(l.value.hint({class:(g=e.ui)==null?void 0:g.hint}))},[f(t.$slots,"hint",{hint:a.hint},()=>[q($(a.hint),1)])],10,le)):C("",!0)],2)):C("",!0),a.description||s.description?(p(),y("p",{key:1,id:`${i(c)}-description`,class:d(l.value.description({class:(I=e.ui)==null?void 0:I.description}))},[f(t.$slots,"description",{description:a.description},()=>[q($(a.description),1)])],10,re)):C("",!0)],2),m("div",{class:d([(a.label||!!s.label||a.description||!!s.description)&&l.value.container({class:(z=e.ui)==null?void 0:z.container})])},[f(t.$slots,"default",{error:o.value}),typeof o.value=="string"&&o.value||s.error?(p(),y("div",{key:0,id:`${i(c)}-error`,class:d(l.value.error({class:(U=e.ui)==null?void 0:U.error}))},[f(t.$slots,"error",{error:o.value},()=>[q($(o.value),1)])],10,ne)):a.help||s.help?(p(),y("div",{key:1,class:d(l.value.help({class:(B=e.ui)==null?void 0:B.help}))},[f(t.$slots,"help",{help:a.help},()=>[q($(a.help),1)])],2)):C("",!0)],2)]}),_:3},8,["as","class"])}}},oe=Q("/assets/danawa.jpg"),ue={class:"flex justify-center items-center min-h-screen bg-[url('/assets/background-pattern.svg')]"},de={class:"space-y-2"},fe=R({__name:"sign-in",setup(a){const e=P(""),s=P(""),n=P(!1),l=X(),b=Z(),o=Y(),w=b.public.API_BASE_URL,c=async()=>{n.value=!0;try{const t=await $fetch(`${w}/v2/authenticate`,{method:"POST",body:{username:e.value,password:s.value}});n.value=!1,t.success&&(o.add({title:"Otentikasi sukses",description:t.message,color:"success"}),l.setUserData(e.value,s.value,t.data.name,t.data.role).then(()=>{t.data.role==="bujp"?F("/absences"):F("/")}))}catch(t){n.value=!1;let r="Unknown Error";t instanceof Error&&(r=t.message),o.add({title:"Otentikasi gagal",description:r,color:"error"})}};return(t,r)=>{const u=O,x=ie,k=ee,S=te;return p(),y("div",ue,[v(S,{class:"w-full max-w-sm bg-white shadow-lg rounded-lg p-6",style:{"background-color":"#f7f7f7"}},{header:h(()=>r[2]||(r[2]=[m("div",{class:"text-center"},[m("div",{class:"flex justify-center w-full"},[m("img",{src:oe,alt:"Logo PHR",class:"h-24 w-auto"})]),m("p",{class:"text-xl mt-4 font-semibold text-gray-800"}," RESTRICTED ACCESS "),m("p",{class:"text-sm text-gray-500"},"Please sign in to continue")],-1)])),default:h(()=>[m("div",de,[v(x,{name:"username",label:"Username / Email",class:"w-full"},{default:h(()=>[v(u,{modelValue:i(e),"onUpdate:modelValue":r[0]||(r[0]=g=>D(e)?e.value=g:null),type:"email",placeholder:"Enter your username or email",size:"lg",variant:"outline",class:"w-full",onKeyup:j(c,["enter"])},null,8,["modelValue"])]),_:1}),v(x,{name:"password",label:"Password",class:"w-full"},{default:h(()=>[v(u,{modelValue:i(s),"onUpdate:modelValue":r[1]||(r[1]=g=>D(s)?s.value=g:null),type:"password",placeholder:"Enter your password",size:"lg",variant:"outline",class:"w-full",onKeyup:j(c,["enter"])},null,8,["modelValue"])]),_:1}),v(k,{size:"md",variant:"solid",class:"w-fit cursor-pointer",loading:i(n),disabled:i(n),label:"Sign In",onClick:c},null,8,["loading","disabled"])])]),_:1})])}}});export{fe as default};
